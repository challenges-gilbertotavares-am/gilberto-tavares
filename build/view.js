(()=>{"use strict";const e=window.wp.date;document.addEventListener("DOMContentLoaded",(()=>{const{ajaxurl:t,nonce:n,siteDateFormat:a,siteTimeFormat:c}=gilbertoTavaresParams,r=`${a} ${c}`;fetch(`${t}?action=gilberto_tavares_get_data&security=${n}`).then((e=>e.json())).then((t=>{if(t.success){const n=t.data,a=document.querySelectorAll(".wp-block-gilberto-tavares-json-table");if(n.data&&n.data.headers){const t=n.data.rows,c=Object.entries(Object.fromEntries(Object.keys(Object.values(t)[0]).map(((e,t)=>[e,n.data.headers[t]])))).map((([e,t])=>({[e]:t}))),d=t=>{const a=document.createElement("table"),d=document.createElement("caption");d.innerText=n.title;const s=document.createElement("thead"),o=document.createElement("tr");c.filter((e=>!t.includes(Object.keys(e)[0]))).map((e=>{const t=Object.keys(e)[0],n=document.createElement("th");return n.innerText=e[t],o.appendChild(n),e})),s.appendChild(o);const i=document.createElement("tbody");return Object.entries(n.data.rows).map((([n,a])=>{const d=document.createElement("tr");return c.filter((e=>!t.includes(Object.keys(e)[0]))).map((t=>{const n=Object.keys(t)[0];let c=a[n];const s=document.createElement("td");if(Number.isInteger(c)&&"date"===Object.keys(t)[0]){c=(e=>{const t=new Date(1e3*e),n=t.getFullYear();let a=t.getDate(),c=t.getMonth()+1,r=t.getHours(),d=t.getMinutes(),s=t.getSeconds();return a<=9&&(a=`0${a}`),c<=9&&(c=`0${c}`),r<=9&&(r=`0${r}`),d<=9&&(d=`0${d}`),s<=9&&(s=`0${s}`),`${n}-${c}-${a} ${r}:${d}:${s}`})(c);const t=document.createElement("time");t.setAttribute("datetime",(0,e.dateI18n)("c",c)),t.innerText=(0,e.dateI18n)(r,c),s.appendChild(t)}else s.innerText=c;return d.appendChild(s),t})),i.appendChild(d),n})),a.appendChild(d),a.appendChild(s),a.appendChild(i),a};a.forEach((e=>{const t=e.dataset.hidden_columns.split(",");e.innerHTML="",e.appendChild(d(t))}))}else a.forEach((e=>{e.querySelector("p").innerText="Not loaded"}))}}))}))})();